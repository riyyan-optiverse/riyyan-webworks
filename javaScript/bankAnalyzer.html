<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bank Analyzer</title>
    <style>
      body {
        background: #f1f5f9;
        padding: 20px;
      }

      h1 {
        text-align: center;
      }

      .container {
        max-width: 900px;
        margin: auto;
      }

      button {
        padding: 10px 14px;
        margin: 5px;
        border: none;
        background: #2563eb;
        color: white;
        border-radius: 5px;
        cursor: pointer;
      }

      button:hover {
        background: #1e40af;
      }

      .output {
        background: white;
        padding: 15px;
        margin-top: 15px;
        border-radius: 5px;
        white-space: pre-line;
        min-height: 100px;
      }
    </style>
  </head>
  <body>
    <h1>Bank Transaction Analyzer</h1>

    <div class="container">
      <button onclick="showTotalBalances()">Total Balances</button>
      <button onclick="showDepositsWithdrawals()">
        Deposits & Withdrawals
      </button>
      <button onclick="showNetTransactions()">Net Transactions</button>
      <button onclick="showWithdrawalHeavy()">More Withdrawals</button>
      <button onclick="showRichest()">Richest Customer</button>
      <button onclick="showRisk()">Financial Risk</button>
      <button onclick="showTransformed()">Transformed Data</button>
      <button onclick="showStatus()">Customer Status</button>

      <div class="output" id="output"></div>
    </div>

    <script>
      const customers = [
        {
          id: 1,
          name: "Ali",
          accounts: [
            {
              type: "savings",
              balance: 12000,
              transactions: [500, -200, 1000, -1500, -300],
            },
            {
              type: "current",
              balance: 8000,
              transactions: [-1000, -2000, 3000],
            },
          ],
        },
        {
          id: 2,
          name: "Sara",
          accounts: [
            {
              type: "savings",
              balance: 25000,
              transactions: [2000, -500, -1000, 4000],
            },
          ],
        },
        {
          id: 3,
          name: "Ahmed",
          accounts: [
            {
              type: "current",
              balance: 3000,
              transactions: [-500, -700, -900],
            },
          ],
        },
        {
          id: 4,
          name: "Ayesha",
          accounts: [
            {
              type: "savings",
              balance: 18000,
              transactions: [3000, -2000, 1500],
            },
            {
              type: "current",
              balance: 6000,
              transactions: [-500, -1000, 2000],
            },
          ],
        },
        {
          id: 5,
          name: "Riyyan",
          accounts: [
            {
              type: "savings",
              balance: 4500,
              transactions: [1000, -2000, -1500, -800],
            },
          ],
        },
        {
          id: 6,
          name: "Hinata",
          accounts: [
            {
              type: "current",
              balance: 22000,
              transactions: [5000, -2000, 3000, -1000],
            },
          ],
        },
      ];

      function showTotalBalances() {
        let output = "";
        for (let i = 0; i < customers.length; i++) {
          let total = 0;
          for (let j = 0; j < customers[i].accounts.length; j++) {
            total = total + customers[i].accounts[j].balance;
          }
          output = output + customers[i].name + ": " + total + "\n";
        }

        document.getElementById("output").innerHTML = output;
      }

      function showDepositsWithdrawals() {
        let output = "";
        for (let i = 0; i < customers.length; i++) {
          let deposits = 0;
          let withdrawals = 0;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            let transactions = customers[i].accounts[j].transactions;

            for (let k = 0; k < transactions.length; k++) {
              if (transactions[k] > 0) {
                deposits += transactions[k];
              } else {
                withdrawals += -transactions[k];
              }
            }
          }
          output =
            output +
            customers[i].name +
            " | Deposits: " +
            deposits +
            " | Withdrawals: " +
            withdrawals +
            "\n" +
            "\n";
        }
        document.getElementById("output").innerHTML = output;
      }
      function showNetTransactions() {
        let output = "";

        for (let i = 0; i < customers.length; i++) {
          output += customers[i].name + "\n";
          for (let j = 0; j < customers[i].accounts.length; j++) {
            let net = 0;
            for (
              let k = 0;
              k < customers[i].accounts[j].transactions.length;
              k++
            ) {
              net += customers[i].accounts[j].transactions[k];
            }
            customers[i].accounts[j].netTransaction = net;
            output += customers[i].accounts[j].type + " : " + net + "\n" + "\n";
          }
        }
        document.getElementById("output").innerText = output;
      }

      function showWithdrawalHeavy() {
        let output = "";

        for (let i = 0; i < customers.length; i++) {
          let deposits = 0;
          let withdrawals = 0;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            let transactions = customers[i].accounts[j].transactions;

            for (let k = 0; k < transactions.length; k++) {
              if (transactions[k] > 0) {
                deposits += transactions[k];
              } else {
                withdrawals += -transactions[k];
              }
            }
          }
          if (withdrawals > deposits) {
            output += customers[i].name + "\n";
          }
        }
        document.getElementById("output").innerText = output;
      }
      function showRichest() {
        let richestName = "";
        let highestBalance = 0;

        for (let i = 0; i < customers.length; i++) {
          let totalBalance = 0;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            totalBalance = totalBalance + customers[i].accounts[j].balance;
          }

          if (totalBalance > highestBalance) {
            highestBalance = totalBalance;
            richestName = customers[i].name;
          }
        }

        document.getElementById("output").innerHTML =
          "Richest Customer: " +
          richestName +
          "\nTotal Balance: " +
          highestBalance;
      }
      function showRisk() {
        let output = "";

        for (let i = 0; i < customers.length; i++) {
          let isRisky = false;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            let account = customers[i].accounts[j];

            if (account.balance < 5000) {
              isRisky = true;
            }

            let negativeCount = 0;

            for (let k = 0; k < account.transactions.length; k++) {
              if (account.transactions[k] < 0) {
                negativeCount++;
              }
            }

            if (negativeCount > 2) {
              isRisky = true;
            }
          }

          if (isRisky) {
            output += customers[i].name + "\n";
          }
        }

        document.getElementById("output").innerText =
          "Customers at Financial Risk:\n\n" + output;
      }

      function showTransformed() {
        let output = "";

        for (let i = 0; i < customers.length; i++) {
          let total = 0;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            total += customers[i].accounts[j].balance;
          }

          output += customers[i].name + "\n";
          output += "Total Balance: " + total + "\n";

          for (let j = 0; j < customers[i].accounts.length; j++) {
            let dep = 0;
            let wit = 0;
            let t = customers[i].accounts[j].transactions;

            for (let k = 0; k < t.length; k++) {
              if (t[k] > 0) dep += t[k];
              else wit += -t[k];
            }

            output +=
              customers[i].accounts[j].type + 
              " ==> Deposits: " +
              dep +
              ", Withdrawals: " + 
              wit + 
              "\n" ;
          }

          output += "\n";
        }

        document.getElementById("output").innerText = output;
      }

      function showStatus() {
        let output = "";

        for (let i = 0; i < customers.length; i++) {
          let total = 0;

          for (let j = 0; j < customers[i].accounts.length; j++) {
            total += customers[i].accounts[j].balance;
          }

          let status = "";

          if (total >= 20000) {
            status = "Stable";
          } else if (total >= 10000) {
            status = "Warning";
          } else {
            status = "Critical";
          }

          output +=
            customers[i].name +
            " | Balance: " +
            total +
            " | Status: " +
            status +
            "\n" +
            "\n";
        }

        document.getElementById("output").innerText = output;
      }
    </script>
  </body>
</html>
